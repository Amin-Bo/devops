{
  "annotations":{"list":[]},
   "panels":[
    {"type":"stat","title":"App up","targets":[{"expr":"up{job=\"crud-app\"}","refId":"A"}],"gridPos":{"x":0,"y":0,"w":6,"h":4}},
    {"type":"stat","title":"Total requests (all routes)","targets":[{"expr":"sum(http_requests_total)","refId":"A"}],"gridPos":{"x":6,"y":0,"w":6,"h":4}},
    {"type":"graph","title":"Request rate (total)","targets":[{"expr":"sum(rate(http_requests_total[1m]))","refId":"A"}],"gridPos":{"x":12,"y":0,"w":12,"h":6}},

    {"type":"graph","title":"Request rate by route","targets":[{"expr":"sum by (route) (rate(http_requests_total[1m]))","refId":"A"}],"gridPos":{"x":0,"y":4,"w":12,"h":6}},
    {"type":"graph","title":"Request duration p95 (by route)","targets":[{"expr":"histogram_quantile(0.95, sum(rate(http_request_duration_seconds_bucket[5m])) by (le, route))","refId":"A"}],"gridPos":{"x":12,"y":4,"w":12,"h":6}},

    {"type":"graph","title":"Error rate (5xx)","targets":[{"expr":"sum(rate(http_requests_total{code=~\"5..\"}[1m]))","refId":"A"}],"gridPos":{"x":0,"y":10,"w":12,"h":6}},
    {"type":"graph","title":"Status code distribution (rate)","targets":[{"expr":"sum by (code) (rate(http_requests_total[5m]))","refId":"A"}],"gridPos":{"x":12,"y":10,"w":12,"h":6}},

    {"type":"graph","title":"Request duration histogram (all routes)","targets":[{"expr":"sum(rate(http_request_duration_seconds_bucket[5m])) by (le)","refId":"A"}],"gridPos":{"x":12,"y":16,"w":12,"h":6}}
   ],
   "schemaVersion":27,
   "title":"Flask CRUD - Extended",
   "version":1
  }
